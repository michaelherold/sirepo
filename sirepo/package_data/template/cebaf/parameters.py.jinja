# -*- python -*-
from pykern.pkcollections import PKDict
import numpy
import os
import re


def _get_machine_data(ml_cfg_inputs, ml_cfg_outputs):
    # stubbed data
    return range(len(ml_cfg_inputs)), 0.95 + 0.1 * numpy.random.rand(len(ml_cfg_outputs))


def _predicted_settings(inputs, ml_model_file):
    import pickle
    import numpy
    from numpy import random

    #with open(, 'rb') as f:
    #    return pickle.load(f).predict(inputs)

    # stubbed data
    return numpy.array(range(9))

i, o = _get_machine_data({{ ml_cfg_inputs }}, {{ ml_cfg_outputs }})
p = _predicted_settings(i)

o = p * r
v = ((p - o) / p) ** 2

return PKDict(
    inputs=inputs.tolist(,
    outputs=o.tolist(),
    predictions=p.tolist(),
    variance=v.tolist(),
)
